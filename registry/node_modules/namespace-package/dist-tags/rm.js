// Installed Modules
var restify = require('restify')

// Local Modules
var pkgdal = require('dal/package')
var auth = require('auth')
var logger = require('logger').child({component: 'namespace-package/dist-tags/rm'})

module.exports = function namespaceDisttagsRm (req, res, next) {
  if (typeof req.params.tag === 'undefined') {
    return next(new restify.MissingParameterError('tag is a required parameter'))
  }
  
  req.package.tag = req.params.tag

  pkgdal.removeTag(req.package.id, req.params.tag, function(err) {
    if (err) {
      return next(err)
    }

    res.end()
    return next()
  })
}
